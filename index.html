<script>
const ENDPOINT_URL =
  "https://script.google.com/macros/s/AKfycbwcRJycyjCUCNUVhjGVt2nfPo5yufz74-0qMMdzZJQ14r4nfPYEzoag8ORwSuYjEDcP/exec";

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function submitEmail() {
  const input = document.getElementById("email-input");
  const msg = document.getElementById("email-msg");
  const email = input.value.trim();

  msg.style.display = "block";

  if (!isValidEmail(email)) {
    msg.style.color = "red";
    msg.textContent = "Please enter valid email ID.";
    hideMessage();
    return;
  }

  fetch(ENDPOINT_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email })
  })
  .then(() => {
    msg.style.color = "black";
    msg.innerHTML =
      "Thank you for giving your email ID.<br>" +
      "Our <b style='color:green'>support@rftalent.in</b> from " +
      "<b style='color:green'>rftalent.in</b> will reach out.";
    input.value = "";
    hideMessage();
  })
  .catch(() => {
    msg.style.color = "red";
    msg.textContent = "Network error.";
    hideMessage();
  });
}

function hideMessage() {
  setTimeout(() => {
    document.getElementById("email-msg").style.display = "none";
  }, 3000);
}

document.getElementById("submit-email").addEventListener("click", submitEmail);
document.getElementById("email-input").addEventListener("keydown", e => {
  if (e.key === "Enter") submitEmail();
});
</script>
