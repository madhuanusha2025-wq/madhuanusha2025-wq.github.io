<script>
const FORMSPREE_URL = "https://formspree.io/f/xykevpya";

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function submitEmail() {
  const input = document.getElementById("email-input");
  const msg = document.getElementById("email-msg");
  const email = input.value.trim();

  msg.style.display = "block";

  if (!isValidEmail(email)) {
    msg.style.color = "red";
    msg.textContent = "Please enter valid email ID.";
    hideMessage();
    return;
  }

  const form = document.createElement("form");
  form.method = "POST";
  form.action = FORMSPREE_URL;
  form.target = "hidden_iframe";

  const emailField = document.createElement("input");
  emailField.type = "hidden";
  emailField.name = "email";
  emailField.value = email;

  form.appendChild(emailField);
  document.body.appendChild(form);
  form.submit();

  msg.style.color = "black";
  msg.innerHTML =
    "Thank you for giving your email ID.<br>" +
    "Our <b style='color:green'>support@rftalent.in</b> will reach out.";

  input.value = "";
  hideMessage();
}

function hideMessage() {
  setTimeout(() => {
    document.getElementById("email-msg").style.display = "none";
  }, 3000);
}

document.getElementById("submit-email").addEventListener("click", submitEmail);
document.getElementById("email-input").addEventListener("keydown", e => {
  if (e.key === "Enter") {
    e.preventDefault();
    submitEmail();
  }
});
</script>
